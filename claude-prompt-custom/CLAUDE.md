## 공통 개발 규칙

### 보안 및 민감 정보 접근
* **환경변수, .env 파일, 프로퍼티 파일은 요청하지 않으면 절대 읽지 말 것**
   * 명시적으로 요청받은 경우에만 접근
   * 필요 시 어떤 환경변수/설정이 필요한지 먼저 질문할 것
   * 예시 코드나 코드 베이스에서 민감 정보가 노출되는 경우, **문서 작성을 포함한 어떠한 경우에도 추가적인 파일 작성 시 노출시키지 말 것.**
   * 민감 정보가 먼저 노출되는 것을 읽은 경우, 관련 코드나 파일 작성에 노출시켜도 되는지 먼저 질문할 것
   * 예시 값이 필요한 경우 실제 값 대신 placeholder 사용 (`YOUR_API_KEY`, `localhost` 등)

### Spec Driven Development (경량 적용)
* **코드 작성 전 plan 문서를 먼저 생성**하고, 문서 기반으로 개발 진행
* plan 문서는 반드시 **프로젝트 폴더 내**에 위치시킬 것

#### Plan 문서 작성 기준
| 작업 규모 | Plan 문서 | 위치 |
|----------|----------|------|
| 단순 버그 수정, 1개 파일 수정 | 불필요 | - |
| 새 기능 추가, 여러 파일 수정 | 필요 | `docs/plans/` 또는 프로젝트 루트 |
| 신규 프로젝트, 아키텍처 변경 | 필수 | `docs/plans/` 또는 `docs/specs/` |

#### Plan 문서 구조 (최소 요구사항)
```markdown
# [기능명] Plan

## 목표
- 무엇을 달성할 것인가

## 작업 범위
- 수정/생성할 파일 목록
- 영향받는 컴포넌트

## 구현 방안
- 기술적 접근 방식
- 주요 의사결정 사항

## 작업 단계
- [ ] Step 1: ...
- [ ] Step 2: ...

## 참고 사항 (선택)
- 제약 조건, 의존성, 주의사항
```

#### 작업 흐름
1. **Plan 문서 생성** → 사용자 확인/수정 요청
2. **Plan 확정** → 코드 작업 시작
3. **작업 완료** → Plan 문서에 완료 표시 또는 삭제

#### 파일 명명 규칙
* `PLAN-[기능명].md` 또는 `[YYYYMMDD]-[기능명]-plan.md`
* 예: `PLAN-user-authentication.md`, `20251226-api-refactoring-plan.md`

## Markdown 작성 규칙

- 모든 Markdown 문서를 작성할 때, CommonMark와 같이 Markdown 표준을 **무조건 지켜서** 작성
- **단, iA Writer의 일부 비호환되는 문법도 호환되도록 작성**
	- **블록 요소 전후 빈 줄 삽입**: 코드 블록(```)`, 인용문(>), 리스트, 테이블 등 블록 요소 앞뒤에 반드시 빈 줄 삽입 (iA Writer는 빈 줄 없이 붙어있는 코드 블록을 인라인처럼 렌더링할 수 있음)
	- **Heading 전후 빈 줄 삽입**: `#` 헤딩 앞뒤에 반드시 빈 줄 삽입
	- **단락 구분은 빈 줄로**: 단일 줄바꿈이 아닌 빈 줄(두 번 줄바꿈)로 단락 구분
	- **리스트 들여쓰기는 4칸 스페이스 또는 탭**: 중첩 리스트 시 정확히 4칸 들여쓰기 사용

- **핵심 규칙: 코드 블록 위에 빈 줄 필수**:
	- 코드 블록(``` 시작) 바로 위에 텍스트가 있고, 그 사이에 빈 줄이 없으면 **반드시 빈 줄 삽입**
	- 즉, 코드 블록 위에 "한 개의 줄바꿈만 있고" 문자열이 있는 경우 → 줄바꿈 하나 더 추가
	- 이 규칙은 다음 모든 케이스를 포함:
		- Heading 다음 코드 블록 (`### 제목` 다음)
		- Bold/라벨 다음 코드 블록 (`**라벨:**` 다음)
		- 리스트 항목 내 코드 블록 (`1. **항목**` 다음)
		- 일반 텍스트 다음 코드 블록

	- 예시:

		```markdown
		<!-- Bad: 코드 블록 위에 빈 줄 없음 -->
		**JSON 형식** (`/path/to/file.json`):
		```json
		{ "key": "value" }
		```

		<!-- Good: 코드 블록 위에 빈 줄 있음 -->
		**JSON 형식** (`/path/to/file.json`):

		```json
		{ "key": "value" }
		```
		```
- **핵심 규칙 2: 연속된 Bold 라벨 라인 사이에 빈 줄 필수**:
	- `**라벨**: 값` 형태의 라인이 연속으로 나오면, 각 라인 사이에 빈 줄 삽입
	- iA Writer에서는 빈 줄 없이 연속된 Bold 라인이 하나의 단락으로 합쳐져 렌더링될 수 있음

	- 예시:

		```markdown
		<!-- Bad: 연속된 Bold 라벨 라인 -->
		**Phase**: 1 (기반 구조 변경)
		**의존성**: TASK-01-02
		**산출물**: `src/utils/json-rpc.ts` (신규)

		<!-- Good: 각 라인 사이에 빈 줄 -->
		**Phase**: 1 (기반 구조 변경)

		**의존성**: TASK-01-02

		**산출물**: `src/utils/json-rpc.ts` (신규)
		```

* **iA Writer 전용 문법 사용 금지** (다른 플랫폼 호환성 확보):
	* Content Blocks 문법 금지: `/filename.ext` 형태의 파일 트랜스클루전
	* Wikilinks 문법 금지: `[[file name]]` 형태의 내부 링크
	* `{{TOC}}` 목차 생성 문법 금지
	* `+++` 페이지 브레이크 문법 금지
	* Cross-reference 문법 금지: `[Header][]` 형태의 헤더 참조

* **확장 문법 사용 시 주의** (GFM/MultiMarkdown 확장, 플랫폼별 지원 확인 필요):
	* 취소선: `~~text~~`
	* 하이라이트: `==text==`
	* 테이블: `| col1 | col2 |` 형식
	* 작업 목록: `- [ ]`, `- [x]`
	* 수학 표현식: `$...$`, `$$...$$`
	* YAML Frontmatter: `---` 메타데이터 블록

## 기타 규칙
- MacOS 특화
  - 클립보드에 복사해달라고 하면 파이프라인과 pbcopy를 사용할 것
  - open . 으로 Finder에서 현재 디렉토리 열기
  - open -a "앱이름" 으로 특정 앱에서 파일 열기
  - 가청을 요청 시 say 명령어로 작업 완료 알림 (예: say "빌드 완료")